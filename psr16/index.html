<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zend\Cache">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>PSR-16 - zend-cache</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/styles-288837cc22.css">

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
                <a href="..">zend-cache</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                
                    <li >
                        <a href="..">zend-cache</a>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Storage <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../storage/adapter/">Adapters</a>
</li>


                        
                            

<li >
    <a href="../storage/capabilities/">Capabilities</a>
</li>


                        
                            

<li >
    <a href="../storage/plugin/">Plugins</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cache Patterns <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../pattern/intro/">Introduction</a>
</li>


                        
                            

<li >
    <a href="../pattern/callback-cache/">CallbackCache</a>
</li>


                        
                            

<li >
    <a href="../pattern/class-cache/">ClassCache</a>
</li>


                        
                            

<li >
    <a href="../pattern/object-cache/">ObjectCache</a>
</li>


                        
                            

<li >
    <a href="../pattern/output-cache/">OutputCache</a>
</li>


                        
                            

<li >
    <a href="../pattern/capture-cache/">CaptureCache</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Standards Support <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            

<li >
    <a href="../psr6/">PSR-6</a>
</li>


                        
                            

<li class="active">
    <a href="./">PSR-16</a>
</li>


                        
                        </ul>
                    </li>
                
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/zend-cache/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div id="page-top" class="container docs">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#psr-16-support">PSR-16 Support</a></li>
        
            <li><a href="#serialization">Serialization</a></li>
        
            <li><a href="#deleting-items-and-exceptions">Deleting items and exceptions</a></li>
        
    
    </ul>

    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="..">zend-cache</a></li>
  
    
      
        <li>Standards Support</li>
      
    
  
  <li class="active">PSR-16</li>
</ol>

<h1 id="psr-16-support">PSR-16 Support</h1>
<ul>
<li>Since 2.8.0</li>
</ul>
<p><a href="https://www.php-fig.org/psr/psr-16/">PSR-16</a> provides a simplified approach to
cache access that does not involve cache pools, tags, deferment, etc.; it
can be thought of as a key/value storage approach to caching.</p>
<p>zend-cache provides PSR-16 support via the class
<code>Zend\Cache\Psr\SimpleCache\SimpleCacheDecorator</code>. This class implements PSR-16's
<code>Psr\SimpleCache\CacheInterface</code>, and composes a
<code>Zend\Cache\Storage\StorageInterface</code> instance to which it proxies all
operations.</p>
<p>Instantiation is as follows:</p>
<pre class="codehilite"><code class="language-php">use Zend\Cache\StorageFactory;
use Zend\Cache\Psr\SimpleCache\SimpleCacheDecorator;

$storage = StorageFactory::factory([
    'adapter' =&gt; [
        'name'    =&gt; 'apc',
        'options' =&gt; [],
    ],
]);

$cache = new SimpleCacheDecorator($storage);</code></pre>

<p>Once you have a <code>SimpleCacheDecorator</code> instance, you can perform operations per
that specification:</p>
<pre class="codehilite"><code class="language-php">// Use has() to determine whether to fetch the value or calculate it:
$value = $cache-&gt;has('someKey') ? $cache-&gt;get('someKey') : calculateValue();
if (! $cache-&gt;has('someKey')) {
    $cache-&gt;set('someKey', $value);
}

// Or use a default value:
$value = $cache-&gt;get('someKey', $defaultValue);</code></pre>

<p>When setting values, whether single values or multiple, you can also optionally
provide a Time To Live (TTL) value. This proxies to the underlying storage
instance's options, temporarily resetting its TTL value for the duration of the
operation. TTL values may be expressed as integers (in which case they represent
seconds) or <code>DateInterval</code> instances. As examples:</p>
<pre class="codehilite"><code class="language-php">$cache-&gt;set('someKey', $value, 30); // set TTL to 30s
$cache-&gt;set('someKey', $value, new DateInterval('P1D'); // set TTL to 1 day

$cache-&gt;setMultiple([
    'key1' =&gt; $value1,
    'key2' =&gt; $value2,
], 3600); // set TTL to 1 hour
$cache-&gt;setMultiple([
    'key1' =&gt; $value1,
    'key2' =&gt; $value2,
], new DateInterval('P6H'); // set TTL to 6 hours</code></pre>

<p>For more details on what methods are exposed, consult the <a href="https://www.php-fig.org/psr/psr-16/#21-cacheinterface">CacheInterface
specification</a>.</p>
<h2 id="serialization">Serialization</h2>
<p>PSR-16 has strict requirements around serialization of values. This is done to
ensure that if you swap one PSR-16 adapter for another, the new one will be able
to return the same values that the original adapter saved to the cache.</p>
<p>Not all cache backends support the same data types, however. zend-cache provides
a plugin, <code>Zend\Cache\Storage\Plugin\Serializer</code>, that you can attach to
adapters in order to ensure data is serialized to a string when saving to the
cache, and deserialized to native PHP types on retrieval. The following adapters
require this plugin in order to work with the <code>SimpleCacheDecorator</code>:</p>
<ul>
<li>Dba</li>
<li>Filesystem</li>
<li>Memcache</li>
<li>MongoDB</li>
<li>Redis</li>
<li>XCache</li>
</ul>
<p>We provide a number of examples of <a href="../storage/plugin/">attaching plugins to storage adapters in the
plugins chapter</a>. Generally, it will be one of:</p>
<pre class="codehilite"><code class="language-php">// Manual attachment after you have an instance:
$cache-&gt;addPlugin(new Serializer());

// Via configuration:
$cache = StorageFactory::factory([
    'adapter' =&gt; 'filesystem',
    'plugins' =&gt; [
        'serializer',
    ],
]);</code></pre>

<h2 id="deleting-items-and-exceptions">Deleting items and exceptions</h2>
<p>PSR-16 states that the <code>delete()</code> and <code>deleteMultiple()</code> methods should return
<code>false</code> if an <em>error</em> occured when deleting the key(s) provided, but <code>true</code>
otherwise.</p>
<p>Generally, zend-cache storage adapters comply with this. However, it is possible
to configure your adapter such that you may get a false positive result from
these methods.</p>
<p>When an exception is raised and caught during key removal by an adapter, the
adapter triggers an event with a <code>Zend\Cache\Storage\ExceptionEvent</code>. Plugins 
can react to these, and even manipulate the event instance. One such plugin,
<code>Zend\Cache\Storage\Plugin\ExceptionHandler</code>, has a configuration option,
<code>throw_exceptions</code> that, when boolean <code>false</code>, will prevent raising the
exception. In such cases, adapters will typically return a boolean <code>false</code>
anyways, but custom, third-party adapters may not.</p>
<p>Additionally, if you add a custom plugin that listens to removal event
exceptions and modifies the return value and/or disables throwing the exception,
a false positive return value could occur.</p>
<p>As such, we recommend that if you wish to use zend-cache to provide a PSR-16
adapter, you audit the plugins you use with your adapter to ensure that you will
get consistent, correct behavior for <code>delete()</code> and <code>deleteMultiple()</code>
operations.</p>

<hr />

</div>
        
    </div>
    <!-- content:end -->

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="https://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2017 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="https://discourse.zendframework.com" class="btn-social btn-outline" alt="Forum" title="Forum"><i class="fa fa-comments"></i></a>
                    <a href="https://zendframework-slack.herokuapp.com" class="btn-social btn-outline" alt="Slack" title="Slack"><i class="fa fa-slack"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <script>var base_url = '..';</script>
    <script src="../js/scripts-0b6185f4a5.js"></script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="https://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

</body>


</html>
