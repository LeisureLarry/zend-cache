<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Caching implementation with a variety of storage options, as well as codified caching strategies for callbacks, classes, and output.">  
    <link rel="canonical" href="https://docs.zendframework.com/psr16/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>PSR-16 - zend-cache - Zend Framework Docs</title>

    <link rel="stylesheet" href="/css/styles.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-cache</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Storage</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../storage/adapter/" class="subnavigation__link">Adapters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../storage/capabilities/" class="subnavigation__link">Capabilities</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../storage/plugin/" class="subnavigation__link">Plugins</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Cache Patterns</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/intro/" class="subnavigation__link">Introduction</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/callback-cache/" class="subnavigation__link">CallbackCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/class-cache/" class="subnavigation__link">ClassCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/object-cache/" class="subnavigation__link">ObjectCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/output-cache/" class="subnavigation__link">OutputCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/capture-cache/" class="subnavigation__link">CaptureCache</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Standards Support</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../psr6/" class="subnavigation__link">PSR-6</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">PSR-16</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-cache</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-cache/" class="header__link header__link--github" title="Go to repository of zend-cache">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12"><strong>
                This package has moved. Visit its replacement, <a href="https://docs.laminas.dev/laminas-cache/">laminas/laminas-cache.</a>
            </strong></div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="..">zend-cache</a></li>

            
                
                    
                    
                        <li>Standards Support</li>
                    
                
            

            <li class="active">PSR-16</li>
        
    
</ol>






    
    
        <h2 class="chapter__headline">Standards Support</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#serialization" class="toc__link">Serialization</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#deleting-items-and-exceptions" class="toc__link">Deleting Items and Exceptions</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="psr-16">PSR-16</h1>
<blockquote>
<p>Available since version 2.8.0</p>
</blockquote>
<p><a href="https://www.php-fig.org/psr/psr-16/">PSR-16</a> provides a simplified approach to
cache access that does not involve cache pools, tags, deferment, etc.; it
can be thought of as a key/value storage approach to caching.</p>
<p>zend-cache provides PSR-16 support via the class
<code>Zend\Cache\Psr\SimpleCache\SimpleCacheDecorator</code>. This class implements PSR-16's
<code>Psr\SimpleCache\CacheInterface</code>, and composes a
<code>Zend\Cache\Storage\StorageInterface</code> instance to which it proxies all
operations.</p>
<p>Instantiation is as follows:</p>
<pre><code class="language-php">use Zend\Cache\StorageFactory;
use Zend\Cache\Psr\SimpleCache\SimpleCacheDecorator;

$storage = StorageFactory::factory([
    'adapter' =&gt; [
        'name'    =&gt; 'apc',
        'options' =&gt; [],
    ],
]);

$cache = new SimpleCacheDecorator($storage);
</code></pre>

<p>Once you have a <code>SimpleCacheDecorator</code> instance, you can perform operations per
that specification:</p>
<pre><code class="language-php">// Use has() to determine whether to fetch the value or calculate it:
$value = $cache-&gt;has('someKey') ? $cache-&gt;get('someKey') : calculateValue();
if (! $cache-&gt;has('someKey')) {
    $cache-&gt;set('someKey', $value);
}

// Or use a default value:
$value = $cache-&gt;get('someKey', $defaultValue);
</code></pre>

<p>When setting values, whether single values or multiple, you can also optionally
provide a Time To Live (TTL) value. This proxies to the underlying storage
instance's options, temporarily resetting its TTL value for the duration of the
operation. TTL values may be expressed as integers (in which case they represent
seconds) or <code>DateInterval</code> instances. As examples:</p>
<pre><code class="language-php">$cache-&gt;set('someKey', $value, 30); // set TTL to 30s
$cache-&gt;set('someKey', $value, new DateInterval('P1D'); // set TTL to 1 day

$cache-&gt;setMultiple([
    'key1' =&gt; $value1,
    'key2' =&gt; $value2,
], 3600); // set TTL to 1 hour
$cache-&gt;setMultiple([
    'key1' =&gt; $value1,
    'key2' =&gt; $value2,
], new DateInterval('P6H'); // set TTL to 6 hours
</code></pre>

<p>For more details on what methods are exposed, consult the <a href="https://www.php-fig.org/psr/psr-16/#21-cacheinterface">CacheInterface
specification</a>.</p>
<h2 id="serialization">Serialization</h2>
<p>PSR-16 has strict requirements around serialization of values. This is done to
ensure that if you swap one PSR-16 adapter for another, the new one will be able
to return the same values that the original adapter saved to the cache.</p>
<p>Not all cache backends support the same data types, however. zend-cache provides
a plugin, <code>Zend\Cache\Storage\Plugin\Serializer</code>, that you can attach to
adapters in order to ensure data is serialized to a string when saving to the
cache, and deserialized to native PHP types on retrieval. The following adapters
require this plugin in order to work with the <code>SimpleCacheDecorator</code>:</p>
<ul>
<li>Dba</li>
<li>Filesystem</li>
<li>Memcache</li>
<li>MongoDB</li>
<li>Redis</li>
<li>XCache</li>
</ul>
<p>We provide a number of examples of <a href="../storage/plugin/">attaching plugins to storage adapters in the
plugins chapter</a>. Generally, it will be one of:</p>
<pre><code class="language-php">// Manual attachment after you have an instance:
$cache-&gt;addPlugin(new Serializer());

// Via configuration:
$cache = StorageFactory::factory([
    'adapter' =&gt; 'filesystem',
    'plugins' =&gt; [
        'serializer',
    ],
]);
</code></pre>

<h2 id="deleting-items-and-exceptions">Deleting Items and Exceptions</h2>
<p>PSR-16 states that the <code>delete()</code> and <code>deleteMultiple()</code> methods should return
<code>false</code> if an <em>error</em> occured when deleting the key(s) provided, but <code>true</code>
otherwise.</p>
<p>Generally, zend-cache storage adapters comply with this. However, it is possible
to configure your adapter such that you may get a false positive result from
these methods.</p>
<p>When an exception is raised and caught during key removal by an adapter, the
adapter triggers an event with a <code>Zend\Cache\Storage\ExceptionEvent</code>. Plugins 
can react to these, and even manipulate the event instance. One such plugin,
<code>Zend\Cache\Storage\Plugin\ExceptionHandler</code>, has a configuration option,
<code>throw_exceptions</code> that, when boolean <code>false</code>, will prevent raising the
exception. In such cases, adapters will typically return a boolean <code>false</code>
anyways, but custom, third-party adapters may not.</p>
<p>Additionally, if you add a custom plugin that listens to removal event
exceptions and modifies the return value and/or disables throwing the exception,
a false positive return value could occur.</p>
<p>As such, we recommend that if you wish to use zend-cache to provide a PSR-16
adapter, you audit the plugins you use with your adapter to ensure that you will
get consistent, correct behavior for <code>delete()</code> and <code>deleteMultiple()</code>
operations.</p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../psr6/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-cache/edit/master/docs/book/psr16.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-cache</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Storage</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../storage/adapter/" class="subnavigation__link">Adapters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../storage/capabilities/" class="subnavigation__link">Capabilities</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../storage/plugin/" class="subnavigation__link">Plugins</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Cache Patterns</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/intro/" class="subnavigation__link">Introduction</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/callback-cache/" class="subnavigation__link">CallbackCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/class-cache/" class="subnavigation__link">ClassCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/object-cache/" class="subnavigation__link">ObjectCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/output-cache/" class="subnavigation__link">OutputCache</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../pattern/capture-cache/" class="subnavigation__link">CaptureCache</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Standards Support</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../psr6/" class="subnavigation__link">PSR-6</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">PSR-16</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2020 by <a href="https://www.zend.com/">Zend</a> by <a href="https://www.perforce.com/">Perforce</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://laminas.dev/chat/" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<nav class="cookie-bar navbar navbar-fixed-bottom navbar-default hidden">
    <div class="container">
        <p class="navbar-text">
            We use cookies to allow you to dismiss dialogs such as the Laminas
            Project notification.
        </p>
        <button type="button" class="cookie-button btn btn-default navbar-btn">Allow Cookies</button>
    </div>
</nav>

    <script>
        var base_url = '..',
            siteName = 'zend-cache';
    </script>
    <script src="/js/scripts.js"></script>
    <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
